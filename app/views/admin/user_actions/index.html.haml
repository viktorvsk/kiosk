.page-header
  = form_tag(url_for, method: :get) do
    %ul.list-group
      %li.list-group-item= select_tag 'actions', options_for_select(user_action_types, default_action_type(params)), include_blank: true
      %li.list-group-item= select_date user_actions_date(params['start'], Date.today - 1.year), prefix: :start
      %li.list-group-item= select_date user_actions_date(params['end'], Date.today), prefix: :end
    = submit_tag 'Отфильтровать', class: 'btn btn-success'
  .inline-index-links
    %ul
      - user_actions_links.each do |scope, type|
        %li= link_to type, '#'
        = UserProductAction.send(scope).count
  %h1 Истории
.table-responsive
  %table.table.table-striped.table-bordered.table-hover
    %thead
      %tr
        %th Имя
        %th Тип действия
        %th Товар
        %th Действие
        %th Дата
    %tbody
      - @user_actions.each do |user_action|
        %tr
          %td
            = user_action.user.name
          %td
            = user_action.action_type
          %td
            = link_to user_action.product.name, product_path(user_action.product) rescue 'Товар удален'
          %td
            = user_action.action.html_safe
          %td
            = I18n.l(user_action.created_at, format: "%e %b, %H:%M")
    %tfoot
      %tr
        %td.text-center{ colspan: 6 }
          = paginate @user_actions
