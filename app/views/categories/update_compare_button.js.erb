(function () {
  var selector = '[data-compare-id="' + '<%= escape_javascript(@product.id.to_s) %>"]';
  var partial = "<%= escape_javascript(render partial: 'products/mini_card/compare_button', locals: { product: @product, cp: @comparing_products }) %>";
  var $node = $(selector).closest('.product_compare');
  $node.replaceWith(partial);
}());
